(this.webpackJsonpdashboard=this.webpackJsonpdashboard||[]).push([[0],{121:function(t,e){},123:function(t,e,i){},125:function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),l=i(64),s=i.n(l),o=i(6),r=i(7),c=i(15),d=i(16),u=i(3),v=i(10),f=i(4),h=i.n(f),p=i(50),b=i.n(p),j="http://localhost/api",m=function(){function t(){Object(o.a)(this,t)}return Object(r.a)(t,[{key:"getRange",value:function(){var t=Object(v.a)(h.a.mark((function t(e,i){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",b.a.get("".concat(j,"/v2/messages?start=").concat(e,"&end=").concat(i)));case 1:case"end":return t.stop()}}),t)})));return function(e,i){return t.apply(this,arguments)}}()},{key:"getAll",value:function(){var t=Object(v.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",b.a.get("".concat(j,"/v2/messages")));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}]),t}(),L=i(12),O=i(29),x=i(46),y="#d9d9d9",g=["#f7f7f7","#d9d9d9","#bdbdbd","#969696","#737373","#525252"],w=[{base:"#8dd3c7",range:["#edf8fb","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45"]},{base:"#ffffb3",range:["#ffffd4","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02"]},{base:"#bebada",range:["#f2f0f7","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3"]},{base:"#fb8072",range:["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d"]},{base:"#80b1d3",range:["#f1eef6","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0"]},{base:"#fdb462",range:["#feedde","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801"]},{base:"#b3de69",range:["#ffffcc","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443"]},{base:"#fccde5",range:["#feebe2","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e"]}],C=Object(x.a)("blue2red"),k=Object(x.a)("qualitative"),M=Object(x.a)("ordinal"),N=function(){function t(){Object(o.a)(this,t)}return Object(r.a)(t,null,[{key:"meterColor",value:function(t){return Object(O.a)(this,C)[C][t]}},{key:"getClusterColors",value:function(){return Object(O.a)(this,k)[k]}},{key:"getClusterColorById",value:function(t){return t?Object(O.a)(this,M)[M][parseInt(t)%Object(O.a)(this,M)[M].length]:g}},{key:"getClusterBaseColorById",value:function(t){return t?Object(O.a)(this,k)[k][parseInt(t)%Object(O.a)(this,k)[k].length]:y}}]),t}();Object.defineProperty(N,C,{writable:!0,value:["#2dacd1","#90b900","#dfb81c","#e85656"]}),Object.defineProperty(N,k,{writable:!0,value:w.map((function(t){return t.base}))}),Object.defineProperty(N,M,{writable:!0,value:w.map((function(t){return t.range}))});var S=function(){function t(){Object(o.a)(this,t),this.messages={all:[],byCluster:{},byLocation:{}},this.overall={location:null,clusters:null,keywords:null,timeline:null}}return Object(r.a)(t,[{key:"setMessages",value:function(t){this.messages.all=t,this.messages.byCluster=E("cluster")(t),this.messages.byLocation=E("location")(t)}},{key:"getTimeline",value:function(){var t=Object(v.a)(h.a.mark((function t(e){var i,n,a,l,s;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.overall.timeline||(this.overall.timeline=this.messages.all.map((function(t){return t.time}))),s={main:this.overall.timeline},void 0!==(null===e||void 0===e||null===(i=e.cluster)||void 0===i?void 0:i.id)&&void 0!==(null===e||void 0===e||null===(n=e.location)||void 0===n?void 0:n.name)&&(s.full=this.messages.byCluster[e.cluster.id].filter((function(t){return t.location===e.location.name})).map((function(t){return t.time}))),void 0!==(null===e||void 0===e||null===(a=e.cluster)||void 0===a?void 0:a.id)&&(s.cluster=this.messages.byCluster[e.cluster.id].map((function(t){return t.time}))),void 0!==(null===e||void 0===e||null===(l=e.location)||void 0===l?void 0:l.name)&&(s.location=this.messages.byLocation[e.location.name].map((function(t){return t.time}))),t.abrupt("return",s);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getKeywords",value:function(){var t=Object(v.a)(h.a.mark((function t(e){var i,n,a,l,s,o,r,c,d,u,v,f,p;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(v=this.messages.all,void 0!==(null===e||void 0===e||null===(i=e.cluster)||void 0===i?void 0:i.id)&&void 0!==(null===e||void 0===e||null===(n=e.location)||void 0===n?void 0:n.name)?v=this.messages.byCluster[e.cluster.id].filter((function(t){return t.location===e.location.name})):void 0!==(null===e||void 0===e||null===(a=e.cluster)||void 0===a?void 0:a.id)?v=this.messages.byCluster[e.cluster.id]:void 0!==(null===e||void 0===e||null===(l=e.location)||void 0===l?void 0:l.name)&&(v=this.messages.byLocation[e.location.name]),null!==e&&void 0!==e&&null!==(s=e.timeRange)&&void 0!==s&&s.start&&null!==e&&void 0!==e&&null!==(o=e.timeRange)&&void 0!==o&&o.end&&(v=v.filter((function(t){return t.time>=e.timeRange.start&&t.time<=e.timeRange.end}))),!this.overall.keywords||void 0!==(null===e||void 0===e||null===(r=e.cluster)||void 0===r?void 0:r.id)||void 0!==(null===e||void 0===e||null===(c=e.location)||void 0===c?void 0:c.name)||void 0!==(null===e||void 0===e||null===(d=e.timeRange)||void 0===d?void 0:d.start)||void 0!==(null===e||void 0===e||null===(u=e.timeRange)||void 0===u?void 0:u.end)){t.next=5;break}return t.abrupt("return",this.overall.keywords);case 5:return f=v.reduce((function(t,e){return[].concat(Object(L.a)(t),Object(L.a)(e.words))}),[]).reduce((function(t,e){return t[e.name]=(t[e.name]||0)+1,t}),{}),p=Object.keys(f).map((function(t){return{text:t,value:f[t]}})),this.overall.keywords||this.messages.all.length!==v.length||(this.overall.keywords=p),t.abrupt("return",p);case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getCluster",value:function(){var t=Object(v.a)(h.a.mark((function t(e){var i,n,a,l,s,o,r,c,d,u=this;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r in i=Object.keys(this.messages.byCluster).sort().map((function(t){return u.messages.byCluster[t].reduce((function(t,e){return e.cluster_keywords.forEach((function(e){return t[e.name]=(t[e.name]||0)+e.count})),t}),{})})),n=[],a=[],l=[],s=[],o=function(t){n.push(t),a.push(""),l.push(""),s.push(Object.keys(i[t]).reduce((function(e,n){return e+i[t][n]}),0))},i)o(r);for(c in i)for(d in i[c])n.push("".concat(c," - ").concat(d)),a.push(d),l.push(c),s.push(i[c][d]);return t.abrupt("return",{ids:n,labels:a,parents:l,values:s,marker:{line:{width:1,color:"rgba(0,0,0,0.5)"},colors:N.getClusterColors().slice(0,i.length)}});case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getLocations",value:function(){var t=Object(v.a)(h.a.mark((function t(e){var i,n,a,l,s,o;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(l=this.messages.all,void 0!==(null===e||void 0===e||null===(i=e.cluster)||void 0===i?void 0:i.id)&&(l=this.messages.byCluster[e.cluster.id]),null!==e&&void 0!==e&&null!==(n=e.timeRange)&&void 0!==n&&n.start&&null!==e&&void 0!==e&&null!==(a=e.timeRange)&&void 0!==a&&a.end&&(l=l.filter((function(t){return t.time>=e.timeRange.start&&t.time<=e.timeRange.end}))),!this.overall.location||this.messages.byLocation!==l){t.next=5;break}return t.abrupt("return",this.overall.location);case 5:return s=l?E("location")(l):this.messages.byLocation,o=Object.keys(s).map((function(t){return{location:t,value:s[t].length}})),this.overall.location||this.messages.byLocation!==l||(this.overall.location=o),t.abrupt("return",o);case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getFilteredMessages",value:function(t){var e,i,n,a,l,s,o=this.messages.all;if(void 0!==(null===t||void 0===t||null===(e=t.cluster)||void 0===e?void 0:e.id)&&void 0!==(null===t||void 0===t||null===(i=t.location)||void 0===i?void 0:i.name)?o=this.messages.byCluster[t.cluster.id].filter((function(e){return e.location===t.location.name})):void 0!==(null===t||void 0===t||null===(n=t.cluster)||void 0===n?void 0:n.id)?o=this.messages.byCluster[t.cluster.id]:void 0!==(null===t||void 0===t||null===(a=t.location)||void 0===a?void 0:a.name)&&(o=this.messages.byLocation[t.location.name]),null!==t&&void 0!==t&&null!==(l=t.timeRange)&&void 0!==l&&l.start&&null!==t&&void 0!==t&&null!==(s=t.timeRange)&&void 0!==s&&s.end&&(o=o.filter((function(e){return e.time>=t.timeRange.start&&e.time<=t.timeRange.end}))),null!==t&&void 0!==t&&t.sortedBy){var r=t.sortedBy.replace("ASC","").replace("DESC","");o=t.sortedBy.includes("ASC")?o.sort((function(t,e){return t[r]<e[r]?-1:t[r]>e[r]?1:0})):o.sort((function(t,e){return e[r]<t[r]?-1:e[r]>t[r]?1:0}))}return null!==t&&void 0!==t&&t.searchQuery&&(o=o.filter((function(e){return e.message.toLowerCase().includes(t.searchQuery.toLowerCase())}))),o}}],[{key:"getInstance",value:function(){return this.instance||(this.instance=new t),this.instance}},{key:"getKeywordWeights",value:function(t){return t.reduce((function(t,e){return e.words.forEach((function(i){var n;return t[i.name]=[].concat(Object(L.a)(null!==(n=t[i.name])&&void 0!==n?n:[]),[e.time])})),t}),{})}},{key:"getMessageMeterData",value:function(e){var i=Math.log10(e/10+1)/t.meterTips.length,n=i<=1?i:1,a=Math.round(n*(t.meterTips.length-1));return{tip:this.meterTips[a],colorClass:this.meterColorClass[a],messages:e,percent:n}}}]),t}();S.instance=null,S.meterTips=["Results will be instantly computed.","Reasonable computing time.","You may experience a small delay.","It takes time to compute, please be patient."],S.meterColorClass=["blue","green","orange","red"];var E=function(t){return function(e){return e.reduce((function(e,i){var n=i[t];return e[n]=(e[n]||[]).concat(i),e}),{})}},T=i(8),R=i(33),_=i.n(R),D=i(51),B=i.n(D),W=i(2);var F=function(t){var e=t.update,i=(t.timeRange,t.location),a=t.data,l=t.cluster,s=Object(n.useState)([]),o=Object(T.a)(s,2),r=o[0],c=o[1],d=[{x:a.main,name:"Messages",autobins:!0,histnorm:"count",marker:{color:"#525252"},opacity:1,type:"histogram"}],u=function(){return l.name&&""!==l.name?l.name:"Selected cluster"};null!==a&&void 0!==a&&a.cluster&&d.push({x:a.cluster,name:u(),histnorm:"count",marker:{color:N.getClusterBaseColorById(l.id)},opacity:1,type:"histogram"}),null!==a&&void 0!==a&&a.location&&d.push({x:a.location,name:i.name,histnorm:"count",marker:{color:"#FFF"},opacity:1,type:"histogram"}),null!==a&&void 0!==a&&a.full&&d.push({x:a.full,name:"".concat(i.name," & ").concat(u()),histnorm:"count",marker:{color:N.getClusterColorById(l.id)[5]},opacity:1,type:"histogram"});var v=function(){var t=Object(n.useState)([0,0]),e=Object(T.a)(t,2),i=e[0],a=e[1];return Object(n.useLayoutEffect)((function(){function t(){a([window.innerWidth,window.innerHeight])}return window.addEventListener("resize",t),t(),function(){return window.removeEventListener("resize",t)}}),[]),i}(),f=Object(T.a)(v,1)[0];return Object(W.jsx)(_.a,{data:d,layout:{bargap:.02,bargroupgap:.2,barmode:"group",title:{text:"Message Distribution"},paper_bgcolor:"transparent",plot_bgcolor:"transparent",yaxis:{gridcolor:"rgba(255,255,255,0.25)",gridwidth:1,zerolinecolor:"rgba(255,255,255,0.5)",zerolinewidth:1},xaxis:{gridcolor:"rgba(255,255,255,0.25)",gridwidth:1,zerolinecolor:"rgba(255,255,255,0.5)",zerolinewidth:1,range:r},font:{color:"white"},autosize:!0,responsive:!0,showlegend:!0,legend:{orientation:"h",y:100},margin:{pad:5,t:25,b:45,r:25,l:50}},style:{margin:0,padding:0,width:f,height:"20vh"},onRelayout:function(t){t["xaxis.range[0]"]&&t["xaxis.range[1]"]&&e(B()(t["xaxis.range[0]"]).format("YYYY-MM-DD HH:MM:ss"),B()(t["xaxis.range[1]"]).format("YYYY-MM-DD HH:MM:ss")),c([t["xaxis.range[0]"],t["xaxis.range[1]"]])},onDoubleClick:function(){return e(void 0,void 0)}})},z=i(75),H=(i(124),i(137)),Z=(i(122),i(139)),P=i(138),I={enableTooltip:!0,deterministic:!1,fontFamily:"impact",fontSizes:[8,80],fontStyle:"normal",fontWeight:"normal",padding:0,rotations:3,rotationAngles:[-45,45],scale:"sqrt",spiral:"archimedean",transitionDuration:500};function A(t,e){return function(i,n){var a="onWordMouseOut"!==t,l=n.target;Object(H.a)(l).on("click",(function(){a&&e(i.text)})).transition().attr("background","white")}}var Q=function(t){var e,i,a,l,s,o,r=t.layout,c=t.data,d=t.update,u=Object(n.useState)([]),v=Object(T.a)(u,2),f=v[0],h=v[1];Object(n.useEffect)((function(){h(c.sort((function(t,e){return e.value-t.value})))}),[c]);var p=null!==(e=null===(i=f[3])||void 0===i?void 0:i.value)&&void 0!==e?e:0,b=null!==(a=null===(l=f[8])||void 0===l?void 0:l.value)&&void 0!==a?a:0,j=null!==(s=null===(o=f[12])||void 0===o?void 0:o.value)&&void 0!==s?s:0,m={getWordColor:function(t){return t.value>p?"#ffff":t.value>b?"#fffb":t.value>j?"#fff9":"#fff6"},getWordTooltip:function(t){return'The word "'.concat(t.text,'" appears ').concat(t.value," times.")},onWordClick:A("onWordClick",d),onWordMouseOut:A("onWordMouseOut",d),onWordMouseOver:A("onWordMouseOver",d)};return Object(W.jsx)(Z.a,{exitBeforeEnter:!0,children:r.wordCloud.visible?Object(W.jsx)("div",{className:"word-clouds",children:Object(W.jsx)(P.a.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},children:Object(W.jsx)(z.a,{callbacks:m,options:I,words:f})})},"cloud"):null})};var K=function(t){var e=t.filters,i=t.data,a=t.update,l=Object(n.useRef)(null),s=Object(n.useState)([Object(u.a)(Object(u.a)({type:"sunburst"},i),{},{branchvalues:"total",insidetextorientation:"radial"})]),o=Object(T.a)(s,2),r=o[0],c=o[1];Object(n.useEffect)((function(){c([Object(u.a)(Object(u.a)({type:"sunburst"},i),{},{branchvalues:"total",insidetextorientation:"radial"})])}),[i]);var d=function(){var t=Object(n.useState)([0,0]),e=Object(T.a)(t,2),i=e[0],a=e[1];return Object(n.useLayoutEffect)((function(){function t(){var t,e,i,n;a([null!==(t=null===l||void 0===l||null===(e=l.current)||void 0===e?void 0:e.clientWidth)&&void 0!==t?t:0,null!==(i=null===l||void 0===l||null===(n=l.current)||void 0===n?void 0:n.clientHeight)&&void 0!==i?i:0])}return window.addEventListener("resize",t),t(),function(){return window.removeEventListener("resize",t)}}),[]),i}(),v=Object(T.a)(d,2),f=v[0],h=v[1];return Object(W.jsx)("div",{style:{width:"100%",height:"100%"},ref:l,children:Object(W.jsx)(_.a,{data:r,layout:{sunburstcolorway:N.getClusterColors(),paper_bgcolor:"transparent",margin:{pad:5,t:5,b:15,r:0,l:0},font:{size:14},width:f,height:h},onClick:function(t){var i=t.points[0],n=i.currentPath,l=i.label,s=i.id;setTimeout((function(){void 0===n||s===e.cluster.id?a(void 0,void 0):"/"===n&&a(l,s)}),1e3)}})})},Y=i(21);var U=function(t){var e,i,a,l,s=t.children,o=t.visible,r=t.title,c=t.position,d=t.closeCallback,u=Object(n.useRef)();return Object(W.jsxs)("div",{ref:u,className:"overlay",style:{left:c.left-(null!==(e=null===u||void 0===u||null===(i=u.current)||void 0===i?void 0:i.clientWidth)&&void 0!==e?e:0)/2,top:c.top-(null!==(a=null===u||void 0===u||null===(l=u.current)||void 0===l?void 0:l.clientHeight)&&void 0!==a?a:0)-50,visibility:o?"visible":"hidden"},children:[Object(W.jsx)("button",{className:"close",onClick:function(){return d()},children:Object(W.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 122.881 122.88",children:Object(W.jsx)("g",{children:Object(W.jsx)("path",{d:"M61.44,0c16.966,0,32.326,6.877,43.445,17.996c11.119,11.118,17.996,26.479,17.996,43.444 c0,16.967-6.877,32.326-17.996,43.444C93.766,116.003,78.406,122.88,61.44,122.88c-16.966,0-32.326-6.877-43.444-17.996 C6.877,93.766,0,78.406,0,61.439c0-16.965,6.877-32.326,17.996-43.444C29.114,6.877,44.474,0,61.44,0L61.44,0z M80.16,37.369 c1.301-1.302,3.412-1.302,4.713,0c1.301,1.301,1.301,3.411,0,4.713L65.512,61.444l19.361,19.362c1.301,1.301,1.301,3.411,0,4.713 c-1.301,1.301-3.412,1.301-4.713,0L60.798,66.157L41.436,85.52c-1.301,1.301-3.412,1.301-4.713,0c-1.301-1.302-1.301-3.412,0-4.713 l19.363-19.362L36.723,42.082c-1.301-1.302-1.301-3.412,0-4.713c1.301-1.302,3.412-1.302,4.713,0l19.363,19.362L80.16,37.369 L80.16,37.369z M100.172,22.708C90.26,12.796,76.566,6.666,61.44,6.666c-15.126,0-28.819,6.13-38.731,16.042 C12.797,32.62,6.666,46.314,6.666,61.439c0,15.126,6.131,28.82,16.042,38.732c9.912,9.911,23.605,16.042,38.731,16.042 c15.126,0,28.82-6.131,38.732-16.042c9.912-9.912,16.043-23.606,16.043-38.732C116.215,46.314,110.084,32.62,100.172,22.708 L100.172,22.708z"})})})}),Object(W.jsxs)("div",{className:"overlay_inner",children:[Object(W.jsx)("h1",{className:"overlay_title",children:r}),Object(W.jsx)("div",{className:"overlay_container",children:s})]})]})};var V=function(t){var e,i,a,l,s,o,r,c,d,f,p,b,j,m,O,x,y,g,w,C,k,M,S,E,R,_,D,B,F,z,H,Z,I,A,Q,K,V,q,J,X=t.selected,G=t.update,$=t.layout,tt=t.data,et=t.cluster,it=Object(n.useState)({locations:{palacehills:{style:{fill:"#fff",fillOpacity:.1},text:""},northwest:{style:{fill:"#fff",fillOpacity:.1},text:""},oldtown:{style:{fill:"#fff",fillOpacity:.1},text:""},safetown:{style:{fill:"#fff",fillOpacity:.1},text:""},southwest:{style:{fill:"#fff",fillOpacity:.1},text:""},downtown:{style:{fill:"#fff",fillOpacity:.1},text:""},wilsonforest:{style:{fill:"#fff",fillOpacity:.1},text:""},scenicvista:{style:{fill:"#fff",fillOpacity:.1},text:""},broadview:{style:{fill:"#fff",fillOpacity:.1},text:""},chapparal:{style:{fill:"#fff",fillOpacity:.1},text:""},terrapinsprings:{style:{fill:"#fff",fillOpacity:.1},text:""},peppermill:{style:{fill:"#fff",fillOpacity:.1},text:""},cheddarford:{style:{fill:"#fff",fillOpacity:.1},text:""},easton:{style:{fill:"#fff",fillOpacity:.1},text:""},weston:{style:{fill:"#fff",fillOpacity:.1},text:""},southton:{style:{fill:"#fff",fillOpacity:.1},text:""},oakwillow:{style:{fill:"#fff",fillOpacity:.1},text:""},eastparton:{style:{fill:"#fff",fillOpacity:.1},text:""},westparton:{style:{fill:"#fff",fillOpacity:.1},text:""}},legend:{indicators:[]}}),nt=Object(T.a)(it,2),at=nt[0],lt=nt[1],st=Object(n.useState)({title:"",id:"",position:{left:0,top:0},visible:!1,totalMessages:0}),ot=Object(T.a)(st,2),rt=ot[0],ct=ot[1];Object(n.useEffect)((function(){var t=function(){var t=Object(v.a)(h.a.mark((function t(){var e,i,n,a,l;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=100*Math.ceil(Math.max.apply(Math,Object(L.a)(tt.map((function(t){return t.value}))))/100),i=N.getClusterColorById(et.id),n=e/i.length,a=N.getClusterColorById(et.id).map((function(t,e){return{start:Math.round(e*n),end:Math.round((e+1)*n),color:t}})),l=function(t){return i[Math.floor((null!==t&&void 0!==t?t:0)/n)]},lt({locations:tt.reduce((function(t,e){return Object(u.a)(Object(u.a)({},t),Object(Y.a)({},e.location.toLowerCase().replace(" ",""),{style:{fill:l(e.value),fillOpacity:1},text:e.value}))}),{}),legend:{indicators:a}});case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[tt,et.id]),Object(n.useEffect)((function(){ct((function(t){return Object(u.a)(Object(u.a)({},t),{},{totalMessages:void 0!==X.id?at.locations[X.id].text:0})}))}),[at,X.id]);var dt=function(t,e,i,n){"Overview"===$.page&&ct({position:{left:t.nativeEvent.x,top:t.nativeEvent.y},totalMessages:n}),G(e,i)};return Object(W.jsx)(P.a.div,{className:"visualization",animate:$.map,transition:{duration:.75},children:Object(W.jsxs)("div",{className:"map",children:[Object(W.jsxs)(U,{title:X.name,position:rt.position,visible:"Overview"===$.page&&void 0!==X.id,closeCallback:function(){return G(void 0,void 0)},children:["Number of messages: ",Object(W.jsx)("strong",{children:null!==(e=rt.totalMessages)&&void 0!==e?e:0})]}),Object(W.jsxs)("svg",{className:"canvas",xmlns:"http://www.w3.org/2000/svg",viewBox:"35 0 450 385",children:[Object(W.jsx)("path",{className:"palacehills"===(null===X||void 0===X?void 0:X.id)?"active":"",d:"M108.64936786328326,140.71532889866253L97.23948212165851,140.59113920416652L98.00014117109822,163.73698560142572L83.54761923168553,168.9063777811061L68.8467188271461,205.34048270738475L51.460226268478436,203.66392468248932L53.8042980330938,188.9629917950735L64.15857529794448,186.2929168375045L67.96187054514303,166.4691569348135L59.39281349838711,150.60393182399335L39.77091475354973,148.92737140820992L39.77091475354973,142.03484437329308L53.75772707085707,140.9947557095059L49.58186412596842,132.00652541361723L43.946777698467486,107.57218664374511L48.324448146275245,95.88281657046764L59.1910059954389,86.27362285527812L69.42109402775532,81.6785952401961L81.34326035369304,74.89471853636587L90.56431087147212,72.65929881963257L103.47999105791678,73.85462744247042L108.68041517143138,73.24920126388639Z",id:"map_palacehills",style:null!==(i=null===(a=at.locations.palacehills)||void 0===a?void 0:a.style)&&void 0!==i?i:{fill:"#fff",fillOpacity:1},onClick:function(t){var e,i;return dt(t,"Palace Hills","palacehills",null!==(e=null===(i=at.locations.northwest)||void 0===i?void 0:i.text)&&void 0!==e?e:0)}}),Object(W.jsx)("path",{className:"northwest"===(null===X||void 0===X?void 0:X.id)?"active":"",d:"M108.64936786328326,140.71532889866253L108.68041517143138,73.24920126388639L113.04256196517963,69.60112013908463L120.64915245960583,70.67225890677219L120.52496322707157,78.43413269011086L131.3449501139985,76.29185576034018L135.36557651823387,72.14701510695437L142.07179507659748,70.40835515661246L156.10517835608334,67.6761749928782L161.55398093472468,72.65929881963257L169.70389932161197,71.27768514669236L179.53037234809017,68.73179009131115L181.0672141010582,71.71235013054604L183.14738374648732,76.13661829476422L183.6441406767117,121.48144418276871L182.09177526968415,121.23306464099852L171.64435608038912,122.73886558167408L167.12697274592938,121.5590627891574L155.6394687339489,118.74926911067104L143.9501572190784,118.9200300599598L139.18439541946282,125.93675186831439L138.43926002411172,132.36357087957512L135.39662382635288,136.9741141440427L133.42511975942762,140.20304640587835L128.41097949474351,143.3233123737823L124.39035309050814,143.27674124213985L108.77355709587573,142.34531859490403Z",id:"map_northwest",style:null!==(l=null===(s=at.locations.northwest)||void 0===s?void 0:s.style)&&void 0!==l?l:{fill:"#fff",fillOpacity:1},onClick:function(t){var e,i;return dt(t,"Northwest","northwest",null!==(e=null===(i=at.locations.northwest)||void 0===i?void 0:i.text)&&void 0!==e?e:0)}}),Object(W.jsx)("path",{className:"oldtown"===(null===X||void 0===X?void 0:X.id)?"active":"",d:"M179.53037234809017,68.73179009131115L179.6079906184459,53.7513657276574L188.03733477857895,47.15376656580969L199.40064955802518,46.998528916348164L212.28528243635083,38.289695127056746L233.13354985270416,30L234.20468198356684,49.51337871187377L239.80872110289056,52.46289356434153L252.64678301903768,47.37109927333768L260.39308640005765,58.06697078459132L268.4188155544107,72.24015760095125L276.4445447087055,71.16901889957671L275.1095104586857,60.73705698261625L269.48994768521516,54.06184093738602L272.7033440777741,46.299959481087285L271.36830982772517,36.95465079779183L294.34331785174436,35.34017848141616L294.88664574417635,46.03605546680029L300.22678274437203,52.18346585712186L301.4841987240361,54.9932665425178L291.4714418487274,88.1364716619168L289.46889047368313,100.16736712300667L281.07059362164,111.99644896428146L273.54162139756954,125.43999285542742L251.1875595364254,125.43999285542742L240.16576514652115,129.15016153977234L235.85018931498053,129.35196986551475L227.6381763118261,126.63531921660785L214.8311617038562,126.77503268436476L204.01117481687106,122.84753162604557L194.38650929334108,124.12047668833787L183.6441406767117,121.48144418276871L183.14738374648732,76.13661829476422Z",id:"map_oldtown",style:null!==(o=null===(r=at.locations.oldtown)||void 0===r?void 0:r.style)&&void 0!==o?o:{fill:"#fff",fillOpacity:1},onClick:function(t){var e,i;return dt(t,"Old Town","oldtown",null!==(e=null===(i=at.locations.oldtown)||void 0===i?void 0:i.text)&&void 0!==e?e:0)}}),Object(W.jsx)("path",{className:"safetown"===(null===X||void 0===X?void 0:X.id)?"active":"",d:"M300.22678274437203,52.18346585712186L303.533321061288,44.76310665027313L307.088237843418,45.71005638623569L309.33916768355994,56.173072257351805L333.5560680331837,84.1623940502194L328.12278910860186,87.4999983342604L331.05675972785684,91.25674312347303L343.16520990265417,89.17656218927675L359.29428648168687,73.68386621406898L362.77158499337384,77.56480294288991L352.355213112256,92.26578605634711L360.76903361835866,100.8193638884112L354.21805160070653,105.08838995501696L364.3860450167267,119.52545523596922L364.64994713588385,134.50584359058834L363.39253115619067,139.5820979189825L368.4066714209039,147.93385408552652L372.08577743556816,156.62712967707665L385.79316397960065,160.2907237374542L377.44143808979425,166.98143903698139L377.42591443570564,170.53636615527788L364.7586127144168,174.15338772169778L253.14353994926205,173.12882370820205L253.29877648994443,152.29601586350145L264.46028376647155,140.59113920416652L273.54162139756954,125.43999285542742L281.07059362164,111.99644896428146L289.46889047368313,100.16736712300667L291.4714418487274,88.1364716619168L301.4841987240361,54.9932665425178Z",id:"map_safetown",style:null!==(c=null===(d=at.locations.safetown)||void 0===d?void 0:d.style)&&void 0!==c?c:{fill:"#fff",fillOpacity:1},onClick:function(t){var e,i;return dt(t,"Safe Town","safetown",null!==(e=null===(i=at.locations.safetown)||void 0===i?void 0:i.text)&&void 0!==e?e:0)}}),Object(W.jsx)("path",{className:"southwest"===(null===X||void 0===X?void 0:X.id)?"active":"",d:"M98.00014117109822,163.73698560142572L97.23948212165851,140.59113920416652L108.64936786328326,140.71532889866253L108.77355709587573,142.34531859490403L124.39035309050814,143.27674124213985L124.15749827949912,172.13530706243233L129.34239873895422,172.21292555131822L129.59077720408095,188.91642072174142L166.81649966456462,188.69908904548458L166.9562125512166,191.10526111108905L175.77364806309924,200.5902348040134L194.09155986597762,221.45406503292588L203.04870826451224,235.48746957302671L212.93727590731578,247.37860371320832L214.2723101573356,252.33065493089504L207.2090475553705,252.48589163954392L180.7101700574567,248.0926926291585L153.31092062342213,232.55349482455063L138.43926002411172,229.71266197535547L104.65978876725421,204.87477215126805L97.9535702088906,187.4416700385398L102.36228796487558,163.876698913252Z",id:"map_southwest",style:null!==(f=null===(p=at.locations.southwest)||void 0===p?void 0:p.style)&&void 0!==f?f:{fill:"#fff",fillOpacity:1},onClick:function(t){var e,i;return dt(t,"Southwest","southwest",null!==(e=null===(i=at.locations.southwest)||void 0===i?void 0:i.text)&&void 0!==e?e:0)}}),Object(W.jsx)("path",{className:"downtown"===(null===X||void 0===X?void 0:X.id)?"active":"",d:"M166.81649966456462,188.69908904548458L129.59077720408095,188.91642072174142L129.34239873895422,172.21292555131822L124.15749827949912,172.13530706243233L124.39035309050814,143.27674124213985L128.41097949474351,143.3233123737823L133.42511975942762,140.20304640587835L138.43926002411172,132.36357087957512L139.18439541946282,125.93675186831439L143.9501572190784,118.9200300599598L155.6394687339489,118.74926911067104L167.12697274592938,121.5590627891574Z",id:"map_downtown",style:null!==(b=null===(j=at.locations.downtown)||void 0===j?void 0:j.style)&&void 0!==b?b:{fill:"#fff",fillOpacity:1},onClick:function(t){var e,i;return dt(t,"Downtown","downtown",null!==(e=null===(i=at.locations.downtown)||void 0===i?void 0:i.text)&&void 0!==e?e:0)}}),Object(W.jsx)("path",{className:"wilsonforest"===(null===X||void 0===X?void 0:X.id)?"active":"",d:"M460.2290852465085,298.8240334627437L432.87640677471063,298.8240334627437L432.2554606118938,168.09914541682087L452.59144744390505,154.99714067107107L460.21356159239076,159.80948894616972Z",id:"map_wilsonforest",style:null!==(m=null===(O=at.locations.wilsonforest)||void 0===O?void 0:O.style)&&void 0!==m?m:{fill:"#fff",fillOpacity:1},onClick:function(t){var e,i;return dt(t,"Wilson Forest","wilsonforest",null!==(e=null===(i=at.locations.wilsonforest)||void 0===i?void 0:i.text)&&void 0!==e?e:0)}}),Object(W.jsx)("path",{className:"scenicvista"===(null===X||void 0===X?void 0:X.id)?"active":"",d:"M460.2290852465085,298.8240334627437L460.19803793836036,308.0761350157758L408.861313928006,323.5221752754823L318.3739343524794,363.4490178679263L313.949692942464,358.93163439415116L314.19807140759076,346.7300415721575L329.4888706667698,346.8231835044106L342.34245623697643,336.3757631640972L349.20391133602243,332.8674168198181L356.12746105136466,332.8674168198181L409.00102681462886,303.2017057818024L414.2790691984992,303.6674155913727L414.1083090037573,299.15003034449376L417.53903655326576,293.2199916480311L432.8453594665625,292.89399474496884L432.87640677471063,298.8240334627437Z",id:"map_scenicvista",style:null!==(x=null===(y=at.locations.scenicvista)||void 0===y?void 0:y.style)&&void 0!==x?x:{fill:"#fff",fillOpacity:1},onClick:function(t){var e,i;return dt(t,"Scenic Vista","scenicvista",null!==(e=null===(i=at.locations.scenicvista)||void 0===i?void 0:i.text)&&void 0!==e?e:0)}}),Object(W.jsx)("path",{className:"broadview"===(null===X||void 0===X?void 0:X.id)?"active":"",d:"M318.3739343524794,363.4490178679263L315.1605379599496,369.06858074472785L297.7895690552832,370L274.5351352581056,358.23306993415014L255.42551709761028,353.60702080242106L249.41786297239014,346.09357170071905L242.57193152740365,324.03445597428595L220.51281909356476,302.6428540073988L204.97364136925898,293.79436714095107L208.97874411937664,283.766080950728L209.8170214391721,269.9034479317178L207.81447006412782,262.04847214272354L213.32536725900718,259.7820165049104L253.88867534461315,260.60477095794806L254.05943553938414,275.5230150450545L335.8225215274433,275.6316807031713L334.93767324544024,312.90399304723445L332.00370262618526,316.30367430109277L323.7140713526169,319.05136181815567L318.09450857920456,320.9142007777782L314.8811121866456,324.3294054666505L314.19807140759076,346.7300415721575L313.949692942464,358.93163439415116Z",id:"map_broadview",style:null!==(g=null===(w=at.locations.broadview)||void 0===w?void 0:w.style)&&void 0!==g?g:{fill:"#fff",fillOpacity:1},onClick:function(t){var e,i;return dt(t,"Broadview","broadview",null!==(e=null===(i=at.locations.broadview)||void 0===i?void 0:i.text)&&void 0!==e?e:0)}}),Object(W.jsx)("path",{className:"chapparal"===(null===X||void 0===X?void 0:X.id)?"active":"",d:"M335.8225215274433,275.6316807031713L334.76691305066925,254.44187413455782L367.63048871740466,254.79891855148438L368.4842896912887,325.94386583446834L356.12746105136466,332.8674168198181L349.20391133602243,332.8674168198181L342.34245623697643,336.3757631640972L329.4888706667698,346.8231835044106L314.19807140759076,346.7300415721575L314.8811121866456,324.3294054666505L318.09450857920456,320.9142007777782L332.00370262618526,316.30367430109277L334.93767324544024,312.90399304723445Z",id:"map_chapparal",style:null!==(C=null===(k=at.locations.chapparal)||void 0===k?void 0:k.style)&&void 0!==C?C:{fill:"#fff",fillOpacity:1},onClick:function(t){var e,i;return dt(t,"Chapparal","chapparal",null!==(e=null===(i=at.locations.chapparal)||void 0===i?void 0:i.text)&&void 0!==e?e:0)}}),Object(W.jsx)("path",{className:"terrapinsprings"===(null===X||void 0===X?void 0:X.id)?"active":"",d:"M368.4842896912887,325.94386583446834L367.63048871740466,254.79891855148438L432.659075617732,254.56606349719672L432.8453594665625,292.89399474496884L417.53903655326576,293.2199916480311L414.1083090037573,299.15003034449376L414.2790691984992,303.6674155913727L409.00102681462886,303.2017057818024Z",id:"map_terrapinsprings",style:null!==(M=null===(S=at.locations.terrapinsprings)||void 0===S?void 0:S.style)&&void 0!==M?M:{fill:"#fff",fillOpacity:1},onClick:function(t){var e,i;return dt(t,"Terrapin Springs","terrapinsprings",null!==(e=null===(i=at.locations.terrapinsprings)||void 0===i?void 0:i.text)&&void 0!==e?e:0)}}),Object(W.jsx)("path",{className:"peppermill"===(null===X||void 0===X?void 0:X.id)?"active":"",d:"M432.659075617732,254.56606349719672L367.63048871740466,254.79891855148438L366.85430601390544,185.57882699328582L357.7108737665112,174.09129293378155L364.7586127144168,174.15338772169778L377.42591443570564,170.53636615527788L381.07397314228,174.3707194785553L403.80060270111426,197.93568427903753L419.5105406202201,201.5992744344686L426.1857118704356,195.7623679369784L426.1857118704356,183.88674448535457L432.3020315740723,176.21803936171807Z",id:"map_peppermill",style:null!==(E=null===(R=at.locations.peppermill)||void 0===R?void 0:R.style)&&void 0!==E?E:{fill:"#fff",fillOpacity:1},onClick:function(t){var e,i;return dt(t,"Pepper Mill","peppermill",null!==(e=null===(i=at.locations.peppermill)||void 0===i?void 0:i.text)&&void 0!==e?e:0)}}),Object(W.jsx)("path",{className:"cheddarford"===(null===X||void 0===X?void 0:X.id)?"active":"",d:"M357.7108737665112,174.09129293378155L366.85430601390544,185.57882699328582L367.63048871740466,254.79891855148438L334.76691305066925,254.44187413455782L335.8225215274433,275.6316807031713L291.16096876730444,275.58510970685563L291.33172896207543,265.5723447937156L293.3342803371197,263.3990312866476L299.01593772682827,263.2282709366573L302.67952008743305,260.06144254674416L302.0585739246162,211.64309842562176L311.8850469510944,195.80893900260122L312.071330799954,173.6721531127514Z",id:"map_cheddarford",style:null!==(_=null===(D=at.locations.cheddarford)||void 0===D?void 0:D.style)&&void 0!==_?_:{fill:"#fff",fillOpacity:1},onClick:function(t){var e,i;return dt(t,"Cheddarford","cheddarford",null!==(e=null===(i=at.locations.cheddarford)||void 0===i?void 0:i.text)&&void 0!==e?e:0)}}),Object(W.jsx)("path",{className:"easton"===(null===X||void 0===X?void 0:X.id)?"active":"",d:"M253.14353994926205,173.12882370820205L204.74078655819176,173.15987110294822L204.55450270936126,127.535694886644L204.01117481687106,122.84753162604557L214.8311617038562,126.77503268436476L227.6381763118261,126.63531921660785L235.85018931498053,129.35196986551475L240.16576514652115,129.15016153977234L251.1875595364254,125.43999285542742L273.54162139756954,125.43999285542742L264.46028376647155,140.59113920416652L253.29877648994443,152.29601586350145Z",id:"map_easton",style:null!==(B=null===(F=at.locations.easton)||void 0===F?void 0:F.style)&&void 0!==B?B:{fill:"#fff",fillOpacity:1},onClick:function(t){return dt(t,"Easton","easton",at.locations.easton.text)}}),Object(W.jsx)("path",{className:"weston"===(null===X||void 0===X?void 0:X.id)?"active":"",d:"M204.01117481687106,122.84753162604557L204.55450270936126,127.535694886644L204.74078655819176,173.15987110294822L166.89411793492036,172.72520757401333L167.12697274592938,121.5590627891574L171.64435608038912,122.73886558167408L182.09177526968415,121.23306464099852L194.38650929334108,124.12047668833787Z",id:"map_weston",style:null!==(z=null===(H=at.locations.weston)||void 0===H?void 0:H.style)&&void 0!==z?z:{fill:"#fff",fillOpacity:1},onClick:function(t){return dt(t,"Weston","weston",at.locations.weston.text)}}),Object(W.jsx)("path",{className:"southton"===(null===X||void 0===X?void 0:X.id)?"active":"",d:"M204.74078655819176,173.15987110294822L204.18193501167116,236.85355299877693L203.04870826451224,235.48746957302671L194.09155986597762,221.45406503292588L175.77364806309924,200.5902348040134L166.9562125512166,191.10526111108905L166.89411793492036,172.72520757401333Z",id:"map_southton",style:null!==(Z=null===(I=at.locations.southton)||void 0===I?void 0:I.style)&&void 0!==Z?Z:{fill:"#fff",fillOpacity:1},onClick:function(t){var e,i;return dt(t,"Southton","southton",null!==(e=null===(i=at.locations.southton)||void 0===i?void 0:i.text)&&void 0!==e?e:0)}}),Object(W.jsx)("path",{className:"oakwillow"===(null===X||void 0===X?void 0:X.id)?"active":"",d:"M203.82489096806967,251.92703948655245L207.2090475553705,252.48589163954392L214.2723101573356,252.33065493089504L212.93727590731578,247.37860371320832L209.4289300874225,243.1561647253166L257.75406520810793,243.1716883986513L272.1134452231054,233.96614935334884L292.9617126394587,228.42419675185172L296.2372036482848,231.5599795287898L302.32247604383156,231.90150041381577L302.67952008743305,260.06144254674416L299.01593772682827,263.2282709366573L293.3342803371197,263.3990312866476L291.33172896207543,265.5723447937156L291.16096876730444,275.58510970685563L254.05943553938414,275.5230150450545L253.88867534461315,260.60477095794806L213.32536725900718,259.7820165049104L207.81447006412782,262.04847214272354Z",id:"map_oakwillow",style:null!==(A=null===(Q=at.locations.oakwillow)||void 0===Q?void 0:Q.style)&&void 0!==A?A:{fill:"#fff",fillOpacity:1},onClick:function(t){var e,i;return dt(t,"Oak Willow","oakwillow",null!==(e=null===(i=at.locations.oakwillow)||void 0===i?void 0:i.text)&&void 0!==e?e:0)}}),Object(W.jsx)("path",{className:"eastparton"===(null===X||void 0===X?void 0:X.id)?"active":"",d:"M252.61573571088957,243.1716883986513L253.14353994926205,173.12882370820205L312.071330799954,173.6721531127514L311.8850469510944,195.80893900260122L302.0585739246162,211.64309842562176L302.32247604383156,231.90150041381577L296.2372036482848,231.5599795287898L292.9617126394587,228.42419675185172L272.1134452231054,233.96614935334884L257.75406520810793,243.1716883986513Z",id:"map_eastparton",style:null!==(K=null===(V=at.locations.eastparton)||void 0===V?void 0:V.style)&&void 0!==K?K:{fill:"#fff",fillOpacity:1},onClick:function(t){var e,i;return dt(t,"East Parton","eastparton",null!==(e=null===(i=at.locations.eastparton)||void 0===i?void 0:i.text)&&void 0!==e?e:0)}}),Object(W.jsx)("path",{className:"westparton"===(null===X||void 0===X?void 0:X.id)?"active":"",d:"M253.14353994926205,173.12882370820205L252.61573571088957,243.1716883986513L209.4289300874225,243.1561647253166L204.18193501167116,236.85355299877693L204.74078655819176,173.15987110294822Z",id:"map_westparton",style:null!==(q=null===(J=at.locations.westparton)||void 0===J?void 0:J.style)&&void 0!==q?q:{fill:"#fff",fillOpacity:1},onClick:function(t){var e,i;return dt(t,"West Parton","westparton",null!==(e=null===(i=at.locations.westparton)||void 0===i?void 0:i.text)&&void 0!==e?e:0)}}),Object(W.jsx)("text",{x:"77.56376705903696",y:"126.89257545416278",children:"Palace Hills"}),Object(W.jsx)("text",{x:"143.11272822708332",y:"101.29220314525485",children:"Northwest"}),Object(W.jsx)("text",{x:"236.82593405011573",y:"82.90114684732106",children:"Old Town"}),Object(W.jsx)("text",{x:"316.97280723513853",y:"129.5833452703226",children:"Safe Town"}),Object(W.jsx)("text",{x:"145.44960400337808",y:"203.19155233022568",children:"Southwest"}),Object(W.jsx)("text",{x:"147.96185716283597",y:"156.2328992406851",children:"Downtown"}),Object(W.jsx)("text",{x:"446.5800705603479",y:"229.30362759038798",children:"Wilson Forest"}),Object(W.jsx)("text",{x:"389.6135004437581",y:"324.170113368631",children:"Scenic Vista"}),Object(W.jsx)("text",{x:"274.6894261128843",y:"308.8147565394684",children:"Broadview"}),Object(W.jsx)("text",{x:"346.52945356282544",y:"301.1654708038661",children:"Chapparal"}),Object(W.jsx)("text",{x:"396.6468383671396",y:"282.2218477079319",children:"Terrapin Springs"}),Object(W.jsx)("text",{x:"397.295612054815",y:"219.43395104786325",children:"Pepper Mill"}),Object(W.jsx)("text",{x:"333.04203493699674",y:"223.39665684251904",children:"Cheddarford"}),Object(W.jsx)("text",{x:"232.46507505178815",y:"148.14913041633014",children:"Easton"}),Object(W.jsx)("text",{x:"185.71921066429627",y:"147.84354392950075",children:"Weston"}),Object(W.jsx)("text",{x:"189.24099229052243",y:"194.7932120764267",children:"Southton"}),Object(W.jsx)("text",{x:"264.65490147823687",y:"253.11882955732526",children:"Oak Willow"}),Object(W.jsx)("text",{x:"279.18183982746666",y:"202.83648795023674",children:"East Parton"}),Object(W.jsx)("text",{x:"228.77195820564594",y:"208.00133785803428",children:"West Parton"})]}),Object(W.jsx)("div",{className:"legend",children:at.legend.indicators.map((function(t,e){return Object(W.jsxs)("div",{className:"indicator",children:[Object(W.jsxs)("div",{className:"range",children:[t.start," - ",t.end]}),Object(W.jsx)("div",{className:"colorBar",style:{backgroundColor:t.color}})]},e)}))})]})},"map")};var q=function(t){var e=t.data,i=Object(n.useRef)(null),a=S.getKeywordWeights(e),l=Object.keys(a).map((function(t){return{points:!1,scalemode:"width",side:"positive",type:"violin",y0:t,x:a[t],orientation:"h",showlegend:!1,width:1.5,hoverinfo:"skip",spanmode:"soft",marker:{color:"#333"},meanline:{visible:!0},box:{visible:!0}}})).filter((function(t){return t.x.length>3})).sort((function(t,e){return e.x.length-t.x.length})).slice(0,10),s=function(){var t=Object(n.useState)([0,0]),e=Object(T.a)(t,2),a=e[0],l=e[1];return Object(n.useLayoutEffect)((function(){function t(){var t,e,n,a;l([null!==(t=null===i||void 0===i||null===(e=i.current)||void 0===e?void 0:e.clientWidth)&&void 0!==t?t:0,null!==(n=null===i||void 0===i||null===(a=i.current)||void 0===a?void 0:a.clientHeight)&&void 0!==n?n:0])}return window.addEventListener("resize",t),t(),function(){return window.removeEventListener("resize",t)}}),[]),a}(),o=Object(T.a)(s,2),r=o[0],c=o[1];return Object(W.jsx)("div",{className:"ridgeLine",ref:i,children:Object(W.jsx)(_.a,{data:l,layout:{yaxis:{showgrid:!0,zeroline:!1,gridcolor:"#0002"},xaxis:{showgrid:!0,zeroline:!1,gridcolor:"#0002",autorange:!0,autotick:!0},autosize:!0,responsive:!0,margin:{l:100,r:45,b:50,t:5,pad:10},paper_bgcolor:"transparent",plot_bgcolor:"transparent",height:c,width:r}})})},J=i(74);var X=function(t){var e=t.sortingOrder,i=t.searchQuery,a=t.data,l=t.update,s=t.itemPerRow,o=void 0===s?100:s,r=Object(n.useState)(a,1),c=Object(T.a)(r,2),d=c[0],u=c[1],v=Object(n.useState)(0),f=Object(T.a)(v,2),h=f[0],p=f[1];Object(n.useEffect)((function(){u(a)}),[a]);var b=function(t,e){var i=setTimeout((function(){l(t,e)}),500);return function(){return clearTimeout(i)}},j=function(t){var e=new Date(t),i=new Intl.DateTimeFormat("en-US",{month:"long"}).format(e),n=e.getDate(),a=e.getHours();a=a<10?"0"+a:a;var l=e.getMinutes();return l=l<10?"0"+l:l,"".concat(n," ").concat(i," ").concat(a,":").concat(l)},m=Math.ceil(d.length/o)-1;return Object(W.jsxs)("div",{className:"messageTable",children:[Object(W.jsx)("div",{className:"table-fill",children:Object(W.jsxs)("table",{children:[Object(W.jsx)("thead",{children:Object(W.jsxs)("tr",{children:[Object(W.jsxs)("th",{width:"7%",className:"span-sort"+(void 0===e||"timeASC"===e||"timeDESC"===e?" sorted":""),onClick:function(){return b("timeASC"!==e?"timeASC":"timeDESC",i)},children:["Time","timeDESC"!==e?Object(W.jsx)("span",{children:"\u25bc"}):Object(W.jsx)("span",{children:"\u25b2"})]}),Object(W.jsxs)("th",{width:"8%",className:"span-sort"+("locationASC"===e||"locationDESC"===e?" sorted":""),onClick:function(){return b("locationASC"!==e?"locationASC":"locationDESC",i)},children:["Location",new Set(d.map((function(t){return t.location}))).size>1?"locationDESC"!==e?Object(W.jsx)("span",{children:"\u25bc"}):Object(W.jsx)("span",{children:"\u25b2"}):""]}),Object(W.jsxs)("th",{width:"10%",className:"span-sort"+("accountASC"===e||"accountDESC"===e?" sorted":""),onClick:function(){return b("accountASC"!==e?"accountASC":"accountDESC",i)},children:["User"," ","accountDESC"!==e?Object(W.jsx)("span",{children:"\u25bc"}):Object(W.jsx)("span",{children:"\u25b2"})]}),Object(W.jsx)("th",{width:"70%",children:"Messages"}),Object(W.jsx)("th",{width:"5%",children:"Tags"})]})}),d.length?Object(W.jsx)("tbody",{children:d.slice(h*o,Math.min((h+1)*o,d.length)).map((function(t){return Object(W.jsxs)("tr",{children:[Object(W.jsx)("td",{children:j(t.time)}),Object(W.jsx)("td",{children:t.location}),Object(W.jsx)("td",{children:t.account}),Object(W.jsx)("td",{children:t.message.split(" ").map((function(t){return Object(W.jsx)("span",{children:t.toLowerCase().replace("?","").replace("!","").replace(".","").replace(",","")===i?Object(W.jsxs)("span",{className:"search",children:[t," "]}):t+" "})}))}),Object(W.jsx)("td",{children:t.words.map((function(t){return t.name})).join(", ")})]},t.id)}))}):Object(W.jsx)("p",{className:"no-data",children:"No messages found."})]})}),Object(W.jsxs)("div",{className:"table-footer",children:[Object(W.jsx)(J.a,{placeholder:void 0===i||""===i?"Search...":i,data:a,onChange:function(t){b(e,t.toLowerCase())}}),Object(W.jsxs)("div",{className:"pagination",children:[Object(W.jsx)("button",{onClick:function(){return p(0)},disabled:!h,title:"first",children:"<<<"}),Object(W.jsx)("button",{onClick:function(){return p((function(t){return t-1}))},disabled:!h,title:"previous",children:"<"}),Object(W.jsxs)("div",{className:"page-number",children:[h+1," / ",m+1]}),Object(W.jsx)("button",{onClick:function(){return p((function(t){return t+1}))},title:"next",disabled:h===m,children:">"}),Object(W.jsx)("button",{onClick:function(){return p((function(t){return m}))},title:"last",disabled:h===m,children:">>>"})]})]})]})};var G=function(t){var e=t.layout,i=t.data,n=(t.location,t.update),a=t.sortingOrder,l=t.searchQuery;return Object(W.jsx)(Z.a,{exitBeforeEnter:!0,children:e.details.visible?Object(W.jsxs)(P.a.div,{className:"details",initial:{left:"120vw"},animate:{left:"40vw"},exit:{left:"120vw"},transition:{duration:.7},children:[Object(W.jsx)(X,{sortingOrder:a,searchQuery:l,data:i,update:n,itemPerRow:"500"}),Object(W.jsx)(q,{data:i})]},"details"):null})};var $=function(t){var e=t.data,i=t.opacity,n=void 0===i?1:i;return Object(W.jsxs)("div",{className:"messageMeter",style:{opacity:n,transition:"0.25s ease-out"},children:[Object(W.jsxs)("div",{className:"meter ".concat(e.colorClass),children:[Object(W.jsx)("progress",{max:"100",value:100*e.percent}),Object(W.jsx)("span",{children:e.messages<1e3?e.messages:"".concat(e.messages/1e3," K")})]}),Object(W.jsx)("span",{className:"tips",children:e.tip})]})};var tt=function(t){var e=t.tab,i=t.update;return Object(W.jsx)("div",{className:"navigator",children:Object(W.jsxs)("div",{className:"tabs",children:[Object(W.jsx)("input",{type:"radio",id:"radio-1",onClick:function(){return i("Overview")}}),Object(W.jsx)("label",{className:"tab",htmlFor:"radio-1",children:"Overview"}),Object(W.jsx)("input",{type:"radio",id:"radio-2",onClick:function(){return i("Messages")}}),Object(W.jsx)("label",{className:"tab",htmlFor:"radio-2",children:"Messages"}),Object(W.jsx)("span",{style:{transform:"translateX(".concat("Overview"===e?"0":"100%",")")},className:"glider",onClick:function(){return i("Overview"===e?"Messages":"Overview")},children:e})]})})},et=function(t){Object(c.a)(i,t);var e=Object(d.a)(i);function i(t){var n;return Object(o.a)(this,i),(n=e.call(this,t)).repository=new m,n.service=S.getInstance(),n.state={messages:[],filters:{timeRange:{start:void 0,end:void 0},location:{name:void 0,id:void 0},cluster:{name:void 0,id:void 0},sortedBy:void 0,searchQuery:void 0},data:{wordCloud:[],sunburst:[],map:[],timeline:[],filtered:[]},layout:{page:"Overview",map:{bottom:0,left:"40vw",width:"60%"},wordCloud:{visible:!0},details:{visible:!1}},ready:!1},n}return Object(r.a)(i,[{key:"componentDidMount",value:function(){var t=this;this.repository.getAll().then(function(){var e=Object(v.a)(h.a.mark((function e(i){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.service.setMessages(i.data),e.t0=t,e.t1=i.data,e.next=5,t.service.getKeywords({});case 5:return e.t2=e.sent,e.next=8,t.service.getCluster({});case 8:return e.t3=e.sent,e.next=11,t.service.getLocations({});case 11:return e.t4=e.sent,e.next=14,t.service.getTimeline({});case 14:return e.t5=e.sent,e.next=17,t.service.getFilteredMessages({});case 17:e.t6=e.sent,e.t7={wordCloud:e.t2,sunburst:e.t3,map:e.t4,timeline:e.t5,filtered:e.t6},e.t8={messages:e.t1,data:e.t7,ready:!0},e.t0.setState.call(e.t0,e.t8);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"rangeUpdateHandler",value:function(){var t=Object(v.a)(h.a.mark((function t(e,i){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(u.a)(Object(u.a)({},this.state.filters),{},{timeRange:{start:e,end:i}}),t.t0=this,t.t1=n,t.t2=u.a,t.t3=Object(u.a)({},this.state.data),t.t4={},t.next=8,this.service.getLocations(n);case 8:return t.t5=t.sent,t.next=11,this.service.getKeywords(n);case 11:return t.t6=t.sent,t.next=14,this.service.getTimeline(n);case 14:return t.t7=t.sent,t.next=17,this.service.getFilteredMessages(n);case 17:t.t8=t.sent,t.t9={map:t.t5,wordCloud:t.t6,timeline:t.t7,filtered:t.t8},t.t10=(0,t.t2)(t.t3,t.t4,t.t9),t.t11={filters:t.t1,data:t.t10,ready:!0},t.t0.setState.call(t.t0,t.t11);case 22:case"end":return t.stop()}}),t,this)})));return function(e,i){return t.apply(this,arguments)}}()},{key:"updateClusterHandler",value:function(){var t=Object(v.a)(h.a.mark((function t(e,i){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(u.a)(Object(u.a)({},this.state.filters),{},{cluster:{name:e,id:i}}),t.t0=this,t.t1=n,t.t2=u.a,t.t3=Object(u.a)({},this.state.data),t.t4={},t.next=8,this.service.getLocations(n);case 8:return t.t5=t.sent,t.next=11,this.service.getKeywords(n);case 11:return t.t6=t.sent,t.next=14,this.service.getTimeline(n);case 14:return t.t7=t.sent,t.next=17,this.service.getFilteredMessages(n);case 17:t.t8=t.sent,t.t9={map:t.t5,wordCloud:t.t6,timeline:t.t7,filtered:t.t8},t.t10=(0,t.t2)(t.t3,t.t4,t.t9),t.t11={filters:t.t1,data:t.t10,ready:!0},t.t0.setState.call(t.t0,t.t11);case 22:case"end":return t.stop()}}),t,this)})));return function(e,i){return t.apply(this,arguments)}}()},{key:"updateSortedByHandler",value:function(){var t=Object(v.a)(h.a.mark((function t(e,i){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(u.a)(Object(u.a)({},this.state.filters),{},{sortedBy:e,searchQuery:i}),t.t0=this,t.t1=n,t.t2=u.a,t.t3=Object(u.a)({},this.state.data),t.t4={},t.next=8,this.service.getKeywords(n);case 8:return t.t5=t.sent,t.next=11,this.service.getTimeline(n);case 11:return t.t6=t.sent,t.next=14,this.service.getFilteredMessages(n);case 14:t.t7=t.sent,t.t8={wordCloud:t.t5,timeline:t.t6,filtered:t.t7},t.t9=(0,t.t2)(t.t3,t.t4,t.t8),t.t10={filters:t.t1,data:t.t9,ready:!0},t.t0.setState.call(t.t0,t.t10);case 19:case"end":return t.stop()}}),t,this)})));return function(e,i){return t.apply(this,arguments)}}()},{key:"updateLocationHandler",value:function(){var t=Object(v.a)(h.a.mark((function t(e,i){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(u.a)(Object(u.a)({},this.state.filters),{},{location:{name:e,id:i},searchQuery:void 0}),t.t0=this,t.t1=n,t.t2=u.a,t.t3=Object(u.a)({},this.state.data),t.t4={},t.next=8,this.service.getKeywords(n);case 8:return t.t5=t.sent,t.next=11,this.service.getTimeline(n);case 11:return t.t6=t.sent,t.next=14,this.service.getFilteredMessages(n);case 14:t.t7=t.sent,t.t8={wordCloud:t.t5,timeline:t.t6,filtered:t.t7},t.t9=(0,t.t2)(t.t3,t.t4,t.t8),t.t10={filters:t.t1,data:t.t9,ready:!0},t.t0.setState.call(t.t0,t.t10);case 19:case"end":return t.stop()}}),t,this)})));return function(e,i){return t.apply(this,arguments)}}()},{key:"hasNoFiler",value:function(t){return void 0===t.cluster.id&&void 0===t.location.id&&void 0===t.searchQuery&&void 0===t.timeRange.start&&void 0===t.timeRange.end}},{key:"switchTab",value:function(){var t=Object(v.a)(h.a.mark((function t(e,i){var n,a=this;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=Object(u.a)(Object(u.a)({},this.state.filters),{},{searchQuery:i}),this.setState((function(t){return Object(u.a)(Object(u.a)({},t),{},{ready:!1})})),setTimeout(Object(v.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e,t.next="Overview"===t.t0?3:"Messages"===t.t0?17:31;break;case 3:return t.t1=a,t.t2=[],t.t3=u.a,t.t4=Object(u.a)({},a.state.data),t.t5={},t.next=10,a.service.getFilteredMessages(n);case 10:return t.t6=t.sent,t.t7={filtered:t.t6},t.t8=(0,t.t3)(t.t4,t.t5,t.t7),t.t9=Object(u.a)(Object(u.a)({},a.state.layout),{},{page:"Overview",map:{bottom:0,left:"40vw",width:"60%"},wordCloud:{visible:!0},details:{visible:!1}}),t.t10={messages:t.t2,data:t.t8,layout:t.t9,ready:!0},t.t1.setState.call(t.t1,t.t10),t.abrupt("break",32);case 17:return t.t11=a,t.t12=n,t.t13=u.a,t.t14=Object(u.a)({},a.state.data),t.t15={},t.next=24,a.service.getFilteredMessages(n);case 24:return t.t16=t.sent,t.t17={filtered:t.t16},t.t18=(0,t.t13)(t.t14,t.t15,t.t17),t.t19=Object(u.a)(Object(u.a)({},a.state.layout),{},{page:"Messages",map:{bottom:"35vh",left:"0vw",width:"40%"},wordCloud:{visible:!1},details:{visible:!0}}),t.t20={filters:t.t12,data:t.t18,layout:t.t19,ready:!0},t.t11.setState.call(t.t11,t.t20),t.abrupt("break",32);case 31:console.log("Invalid tab name");case 32:case"end":return t.stop()}}),t)}))),0);case 3:case"end":return t.stop()}}),t,this)})));return function(e,i){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this;return Object(W.jsxs)("div",{className:"dashboard",children:[this.state.ready?"":Object(W.jsx)("div",{className:"loading",children:Object(W.jsxs)("div",{className:"container",children:[Object(W.jsx)("span",{className:"loader",children:Object(W.jsx)("span",{className:"loader-inner"})}),Object(W.jsx)("h1",{children:"Loading ..."}),Object(W.jsx)("span",{className:"message",children:"Please wait!"})]})}),Object(W.jsxs)("div",{className:"navigation",children:[Object(W.jsx)("h1",{children:"Visual Explorer"}),Object(W.jsx)(tt,{tab:this.state.layout.page,update:function(e){return t.switchTab(e,void 0)}}),Object(W.jsx)($,{data:S.getMessageMeterData(this.state.data.filtered.length),opacity:"Messages"===this.state.layout.page?1:0})]}),Object(W.jsxs)("div",{className:"main-container",children:[Object(W.jsxs)("div",{className:"control",children:[Object(W.jsx)(Q,{layout:this.state.layout,data:this.state.data.wordCloud,update:function(e){return t.switchTab("Messages",e)}}),Object(W.jsx)("div",{className:"sunburst",children:Object(W.jsx)(K,{data:this.state.data.sunburst,filters:this.state.filters,update:function(e,i){return t.updateClusterHandler(e,i)}})},"sunburst")]}),Object(W.jsx)(V,{data:this.state.data.map,selected:this.state.filters.location,layout:this.state.layout,cluster:this.state.filters.cluster,update:function(e,i){return t.updateLocationHandler(e,i)}}),Object(W.jsx)(G,{layout:this.state.layout,data:this.state.data.filtered,location:this.state.selectedLocation,update:function(e,i){return t.updateSortedByHandler(e,i)},sortingOrder:this.state.filters.sortedBy,searchQuery:this.state.filters.searchQuery})]}),Object(W.jsx)("div",{className:"timeline",children:Object(W.jsx)(F,{data:this.state.data.timeline,update:function(e,i){return t.rangeUpdateHandler(e,i)},cluster:this.state.filters.cluster,location:this.state.filters.location})})]})}}]),i}(n.Component),it=et,nt=(i(123),function(t){Object(c.a)(i,t);var e=Object(d.a)(i);function i(){return Object(o.a)(this,i),e.apply(this,arguments)}return Object(r.a)(i,[{key:"render",value:function(){return Object(W.jsx)("div",{className:"app",children:Object(W.jsx)(it,{})})}}]),i}(n.Component)),at=nt,lt=function(t){t&&t instanceof Function&&i.e(3).then(i.bind(null,140)).then((function(e){var i=e.getCLS,n=e.getFID,a=e.getFCP,l=e.getLCP,s=e.getTTFB;i(t),n(t),a(t),l(t),s(t)}))};s.a.render(Object(W.jsx)(a.a.StrictMode,{children:Object(W.jsx)(at,{})}),document.getElementById("root")),lt()}},[[125,1,2]]]);
//# sourceMappingURL=main.557ca7f1.chunk.js.map